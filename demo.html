<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Editable Code Component</title>
    <style>
      .App {
        padding: 20px;
        max-width: 800px;
        margin: 0 auto;
      }
      pre {
        padding: 1em;
        background-color: #f5f5f5;
        border-radius: 4px;
        overflow: auto;
        min-height: 100px;
        cursor: text;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="importmap">
      {
        "imports": {
          "react": "https://esm.sh/react@18",
          "react-dom": "https://esm.sh/react-dom@18",
          "react-dom/client": "https://esm.sh/react-dom@18/client"
        }
      }
    </script>
    <script type="module">
      import React from 'react';
      import ReactDOM from 'react-dom/client';
      import { useEditable } from './dist/index.mjs';

      const Edit = () => {
        const editorRef = React.useRef(null);
        const [code, setCode] = React.useState(
          'function test() {}\n\nconsole.log("hello");'
        );

        const onEditableChange = React.useCallback(code => {
          setCode(code);
        }, []);

        useEditable(editorRef, onEditableChange, {
          disabled: false,
          indentation: 2,
        });

        return React.createElement('pre', { ref: editorRef }, code);
      };

      const App = () =>
        React.createElement(
          'div',
          { className: 'App' },
          React.createElement('h1', null, 'Editable Code Component'),
          React.createElement(Edit)
        );

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(React.createElement(App));
    </script>
  </body>
</html>
